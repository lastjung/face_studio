# Landing Prompt

Next.js 16 App routing + TypeScript + Tailwind CSS v4ë¡œ AI ë°˜ì‘í˜• ì´ë¯¸ì§€ ìƒì„± ì„œë¹„ìŠ¤ "ë”¸ê¹ ìŠ¤íŠœë””ì˜¤"ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

## Header (ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”)
- ì™¼ìª½: ë¡œê³ 
- ê°€ìš´ë°: ì´ë¯¸ì§€ ìƒì„±, ë‚´ ê°¤ëŸ¬ë¦¬, ìš”ê¸ˆì œ, ì‚¬ìš©ë‚´ì—­ ë©”ë‰´
- ì˜¤ë¥¸ìª½: ì‹œì‘í•˜ê¸° ë²„íŠ¼

## Hero
- ì œëª©: "ë”¸ê¹ ìŠ¤íŠœë””ì˜¤" (ìš°ì¸¡ ìƒë‹¨ ìš°ì¸¡ìœ¼ë¡œ 30ë„ ê¸°ìš¸ì–´ì§„ "AI" ë°°ì§€ í¬í•¨)
- ë¶€ì œ: "ë‚´ ì–¼êµ´ì€ ê·¸ëŒ€ë¡œ, ì›í•˜ëŠ” ëª¨ìŠµìœ¼ë¡œ ë³€ì‹ !"

## í°ìƒ‰ í†¤ì˜ AI ì´ë¯¸ì§€ ìƒì„± ì¸í„°í˜ì´ìŠ¤
- ê°€ë¡œë¡œ ê¸´ í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½, ì…ë ¥ì°½ ë‚´ ìš°ì¸¡ í•˜ë‹¨ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ ì•„ì´ì½˜
- í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½ê³¼ ì¢Œìš° ë„ˆë¹„ê°€ ê°™ì€ ê²€ì •ìƒ‰ "ìƒì„±í•˜ê¸°" ë²„íŠ¼
- ëª¨ë¸ / ìŠ¤íƒ€ì¼ / ë¹„ìœ¨ ì„ íƒ ë²„íŠ¼ (ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì˜µì…˜ ì„ íƒ)

## SAMPLE GALLERY
- ì œëª©: "SAMPLE GALLERY"
- ë¶€ì œ: "í”„ë¦¬ë¯¸ì—„ AI ëª¨ë°ë§ ë§Œë“  ë†€ë¼ìš´ ë³€í™” (ë‹¤ìŒ ì¤„)
- í¬ê¸°ê°€ ì‘ì€ ì—¬ì„±/ë‚¨ì„±/ì•„ì´ ì •ì‚¬ê°í˜• ì´ë¯¸ì§€ ë°•ìŠ¤ 3ê°œê°€ ê°€ë¡œë¡œ ë‚˜ì—´
- ë°”ë¡œ ì•„ë˜ í° ì›ë³¸ ì´ë¯¸ì§€, ì´ë¯¸ì§€ ìœ„ìª½ì— ê²€ì •ìƒ‰ "ì›ë³¸ì‚¬ì§„" ë°°ì§€, ê¸°ë³¸ ì„¸íŒ…ì€ ì—¬ì„± ì´ë¯¸ì§€ì´ë©°, ë‚¨ì„±, ì•„ì´ í´ë¦­ ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ë¡œ ë³€ê²½
- ì›ë³¸ ì´ë¯¸ì§€ ì•„ë˜ 3x3 ì˜ˆì‹œ ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ, ì´ë¯¸ì§€ ìœ„ìª½ì— ê²€ì •ìƒ‰ "AI ìƒì„± ì´ë¯¸ì§€" ë°°ì§€, (ë§ˆì°¬ê°€ì§€ë¡œ ê¸°ë³¸ì€ ì—¬ì„±, ë‚¨ì„±, ì•„ì´ í´ë¦­ ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ë¡œ ë³€ê²½ )

# CTA
- "ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”"
- ë°”ë¡œ ì‹œì‘í•˜ê¸° â†’ ë²„íŠ¼

## Footer
- í‘¸í„° ì¢Œì¸¡: íšŒì‚¬ ê¸°ë³¸ ì •ë³´(ìƒí˜¸ëª…, ëŒ€í‘œ, ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, í†µì‹ íŒë§¤ì—…ì‹ ê³ , ì£¼ì†Œ, ì´ë©”ì¼ì„ í‘¸í„° ì¢Œì¸¡ì—,
- í‘¸í„° ìš°ì¸¡: ì´ìš© ì•½ê´€, ê°œì¸ì •ë³´ ì²˜ë¦¬ ë°©ì¹¨, Â© 2025 ìƒí˜¸ëª…. All rights reserved

## ê¸°ëŠ¥
- ì˜ˆì‹œ ì´ë¯¸ì§€ í´ë¦­ ì‹œ í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½ì— í…ìŠ¤íŠ¸ ìë™ ì…ë ¥,

## ë””ìì¸
- ì „ì²´ì ìœ¼ë¡œ ë°ì€ íšŒìƒ‰ ë°°ê²½
- ì—ë©”ë„ë“œìƒ‰ Primary ë²„íŠ¼

# Login Prompt

## ë¡œê·¸ì¸ ì°½ êµ¬í˜„ (íŒì—… ëª¨ë‹¬)
- ë³„ë„ì˜ ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™ì´ ì•„ë‹Œ, í˜„ì¬ í™”ë©´ ê°€ìš´ë° íŒì—…ë˜ëŠ” í˜•íƒœ
- **íŠ¸ë¦¬ê±°**: ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ë‹¤ìŒ ìš”ì†Œ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ì°½ íŒì—…
  - í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½, ìƒì„±í•˜ê¸° ë²„íŠ¼, ëª¨ë¸/ìŠ¤íƒ€ì¼/ë¹„ìœ¨ ë“œë¡­ë‹¤ìš´
  - ë‚´ ê°¤ëŸ¬ë¦¬ ë©”ë‰´, ìƒë‹¨ ì‹œì‘í•˜ê¸° ë²„íŠ¼, ì´ë¯¸ì§€ ì—…ë¡œë“œ ë²„íŠ¼
  - ìƒ˜í”Œ ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€, í•˜ë‹¨ ë°”ë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼

## ë¡œê·¸ì¸ ì°½ ë””ìì¸
- **ë ˆì´ì•„ì›ƒ**: í™”ë©´ ì •ì¤‘ì•™ ë°°ì¹˜ (Backdrop blur ì ìš©)
- **í—¤ë” í…ìŠ¤íŠ¸**:
  - ì œëª©: "ë¡œê·¸ì¸/íšŒì›ê°€ì…"
  - ì„¤ëª…: "ë”¸ê¹ ìŠ¤íŠœë””ì˜¤ì—ì„œ ë‚˜ë§Œì˜ íŠ¹ë³„í•œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”"
- **ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼**:
  - **êµ¬ê¸€**: íšŒìƒ‰ ë°°ê²½, êµ¬ê¸€ ë¡œê³  + "êµ¬ê¸€ë¡œ ê³„ì†í•˜ê¸°" í…ìŠ¤íŠ¸ (ê°€ìš´ë° ì •ë ¬)
  - **ì¹´ì¹´ì˜¤**: ë…¸ë€ìƒ‰(#FEE500) ë°°ê²½, ì¹´ì¹´ì˜¤ ë¡œê³  + "ì¹´ì¹´ì˜¤ë¡œ ê³„ì†í•˜ê¸°" í…ìŠ¤íŠ¸ (ê°€ìš´ë° ì •ë ¬)
  - ë¡œê³ ì™€ í…ìŠ¤íŠ¸ëŠ” ë²„íŠ¼ ì¤‘ì•™ì— í•¨ê»˜ ë°°ì¹˜ (ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ë¥¼ ê·¸ë£¹í™”í•˜ì—¬ ì¤‘ì•™ ì •ë ¬)
- **ê¸°íƒ€**: ìš°ì¸¡ ìƒë‹¨ ë‹«ê¸°(X) ë²„íŠ¼, í•˜ë‹¨ ì•½ê´€ ë™ì˜ ë¬¸êµ¬

# Supabase Profile Table

## Database Schema (PostgreSQL)

### 1. Custom Types
- **Enum**: `public.app_role` ('Admin', 'User')
  - ëŒ€ì‹œë³´ë“œì—ì„œ ê¶Œí•œì„ ì§ê´€ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•¨

### 2. Profiles Table (`public.profiles`)
- **PK**: `id` (UUID, `auth.users` í…Œì´ë¸” ì°¸ì¡°, ON DELETE CASCADE)
- **Columns**:
  - `username` (text, 3ì ì´ìƒ)
  - `full_name` (text)
  - `avatar_url` (text)
  - `website` (text)
  - `role` (public.app_role, Default: 'User')
  - `updated_at` (timestamp with time zone)

### 3. Security (RLS)
- **Select**: ëª¨ë“  ì‚¬ìš©ì í—ˆìš© (`true`)
- **Insert/Update**: ë³¸ì¸(`auth.uid() = id`)ë§Œ ê°€ëŠ¥

### 4. Encryption & Automation
- **Trigger**: `public.handle_new_user` í•¨ìˆ˜
  - `auth.users`ì— INSERT ë°œìƒ ì‹œ(íšŒì›ê°€ì…), ìë™ìœ¼ë¡œ `profiles` í…Œì´ë¸”ì— í•´ë‹¹ ìœ ì € í–‰ ìƒì„±
  - ë©”íƒ€ë°ì´í„°(`full_name`, `avatar_url`) ìë™ ë³µì‚¬ ë° ê¸°ë³¸ ë¡¤ ì„¤ì •

# Supabase Integration Details

## 1. Stack & Libraries
- **Client**: `@supabase/supabase-js`
- **SSR/Server**: `@supabase/ssr` (Next.js 14 App Router í˜¸í™˜)
- **Role Management**: Custom `app_role` Enum (Admin/User)

## 2. Authentication Flow
1.  **Trigger**: User clicks "Login" button (Google/Kakao).
2.  **Client Action**: `supabase.auth.signInWithOAuth()` called with `redirectTo` param.
    - `redirectTo`: `${origin}/auth/callback?next=${currentPath}`
    - `next` íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ë¡œê·¸ì¸ ì‹œë„ ì „ í˜ì´ì§€ ìœ„ì¹˜ë¥¼ ê¸°ì–µ.
3.  **Provider**: Google/Kakao ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ ë° ì¸ì¦ ìˆ˜í–‰.
4.  **Callback**: `/app/auth/callback/route.ts`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (Code í¬í•¨).
5.  **Server Action**:
    - `exchangeCodeForSession(code)` ì‹¤í–‰í•˜ì—¬ ì¿ í‚¤ì— ì„¸ì…˜ ì €ì¥.
    - `next` íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ í•´ë‹¹ ê²½ë¡œë¡œ, ì—†ìœ¼ë©´ í™ˆ(`/`)ìœ¼ë¡œ ìµœì¢… ë¦¬ë‹¤ì´ë ‰íŠ¸.

## 3. Middleware (`middleware.ts`)
- ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ `updateSession` ì‹¤í–‰.
- ì¿ í‚¤ ì„¸ì…˜ ë§Œë£Œ ì‹œ í† í° ìë™ ê°±ì‹  (Silent Refresh).
- SSR í˜ì´ì§€ ë Œë”ë§ ì „ ìœ ì € ì¸ì¦ ìƒíƒœ í™•ì •.

# ğŸ“¸ ì²¨ë¶€ëœ ì´ë¯¸ì§€ ìš”êµ¬ì‚¬í•­ (Supabase)

## ì°¸ì¡° ë¬¸ì„œ
- **SSR Auth (Next.js)**:
  - https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app
- **Social Login (Google/Kakao)**:
  - https://supabase.com/docs/guides/auth/social-login/auth-google?queryGroups=platform&platform=web&queryGroups=environment&environment=client
  - https://supabase.com/docs/guides/auth/social-login/auth-kakao?queryGroups=environment&environment=client
- **User Data Management**:
  - https://supabase.com/docs/guides/auth/managing-user-data

## í•µì‹¬ ìš”êµ¬ì‚¬í•­
1.  **ë¦¬ë‹¤ì´ë ‰íŠ¸**: ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ë°˜ë“œì‹œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ ì‹œë„í•œ í˜ì´ì§€ë¡œ ëŒì•„ê°€ì•¼ í•¨.
2.  **Profiles í…Œì´ë¸”**:
    - ìœ„ ë¬¸ì„œ(managing-user-data) ì°¸ì¡°í•˜ì—¬ ìƒì„±.
    - `role` ì»¬ëŸ¼ì„ ë‘ê³  **Admin, User, Null** ì¤‘ ì„ íƒ ê°€ëŠ¥í•˜ë„ë¡ Enum ì„¤ì •.

# My Gallery Page Requirements (ë‚´ ê°¤ëŸ¬ë¦¬ í˜ì´ì§€)

## 1. í˜ì´ì§€ êµ¬ì¡° ë° ë„¤ë¹„ê²Œì´ì…˜
- **URL**: `/gallery`
- **ì ‘ê·¼**: í—¤ë”ë°”ì˜ "ë‚´ ê°¤ëŸ¬ë¦¬" ë²„íŠ¼ í´ë¦­ ì‹œ ì´ë™ (í—¤ë”ë°”ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€)

## 2. ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ í‘œì‹œ
- **í•­ëª©**: ì‚¬ìš©ìê°€ ìƒì„±í•œ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ê²©ì í˜•íƒœë¡œ í‘œì‹œ
- **ë°˜ì‘í˜•**:
  - **ëª¨ë°”ì¼**: 2ì¤„ (2 Columns)
  - **ì»´í“¨í„°**: 4ì¤„ (4 Columns)
- **ì¸í„°ë™ì…˜**:
  - **í˜¸ë²„**: ì´ë¯¸ì§€ ìœ„ì— ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ìš°ì¸¡ ìƒë‹¨ ë‹¤ìš´ë¡œë“œ/ì‚­ì œ ì•„ì´ì½˜ í‘œì‹œ
  - **ë¬´í•œ ìŠ¤í¬ë¡¤**:
    - ì´ˆê¸° ë¡œë“œ: ìµœëŒ€ 20ê°œ ì´ë¯¸ì§€ í‘œì‹œ
    - ìŠ¤í¬ë¡¤ ë‚´ë¦¬ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì´ë¯¸ì§€ë“¤ ë¶ˆëŸ¬ì˜¤ê¸°

## 3. ì´ë¯¸ì§€ ìƒì„¸ íŒì—… (ëª¨ë‹¬)
- **íŠ¸ë¦¬ê±°**: ì´ë¯¸ì§€ í´ë¦­ ì‹œ ë‘ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ ì§„ íŒì—… ë„ì›€
- **êµ¬ì„±**:
  - **ì™¼ìª½ ì˜ì—­**: ì´ë¯¸ì§€ ë°˜ì˜ (ë°˜ë“œì‹œ ì´ë¯¸ì§€ ì „ì²´ê°€ ë³´ì—¬ì•¼ í•¨)

## 4. ê°œë°œ í™˜ê²½ (Mock Data)
- **ì¡°ê±´**: ê°œë°œ í™˜ê²½ì—ì„œë§Œ ë³´ì´ëŠ” ëœë¤í•œ ìƒ˜í”Œ ì´ë¯¸ì§€ 60ê°œ ë°˜ì˜
- **ë°ì´í„° ì†ŒìŠ¤**: `https://picsum.photos/`ì—ì„œ ëœë¤í•œ ì´ë¯¸ì§€ ê°€ì ¸ì˜´
- **ì„¤ì •**: `picsum.photos` ë„ë©”ì¸ì„ `next.config.ts`ì— ì¶”ê°€

# Image Storage & Persistence Logic

## 1. Process Overview
1.  **Imagen API í˜¸ì¶œ**: ì´ë¯¸ì§€ ìƒì„± (Base64 ìˆ˜ì‹ )
2.  **Supabase Storage ì—…ë¡œë“œ**:
    -   `generated_images` ë²„í‚·ì— ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥
    -   Content-Type: `image/png`
    -   Path: `{user_id}/{timestamp}_{uuid}.png`
3.  **Database ì €ì¥ (`public.images`)**:
    -   `storage_url`: Storageì˜ Public URL
    -   `prompt`: ìƒì„± í”„ë¡¬í”„íŠ¸
    -   `model`: ì‚¬ìš© ëª¨ë¸
    -   `user_id`: ìƒì„±í•œ ìœ ì € ID
4.  **Client ì‘ë‹µ**: ìƒì„±ëœ ì´ë¯¸ì§€ì˜ Signed URL ë˜ëŠ” Public URL ë°˜í™˜

## 2. Database Schema (`public.images`)
-   `id`: UUID (PK)
-   `user_id`: UUID (FK to auth.users)
-   `storage_path`: Text (ìŠ¤í† ë¦¬ì§€ ê²½ë¡œ)
-   `prompt`: Text
-   `model`: Text
-   `created_at`: Timestamptz (Default: now())
-   `face_description`: Text (Gemini Vision Analysis)
-   `final_prompt`: Text (Actual Prompt sent to GenAI)

# Feature Proposal: Low Vision Accessibility (ì €ì‹œë ¥ì ì ‘ê·¼ì„±)

## Goal
Improve the experience for users with low vision by providing detailed, descriptive alt text for generated images, going beyond simple prompts.

## Implementation Strategy: "AI Audio Description"
Use **Gemini Vision** to re-analyze the *generated output image* specifically for accessibility purposes.

### 1. Workflow
1.  **Generation**: User generates an image.
2.  **Post-Processing**: The system sends the generated image to Gemini Vision with a specialized prompt.
    -   *Prompt Example*: "Describe this image for a visually impaired user. Focus on detailed visual elements like lighting, facial expressions, colors, composition, and mood. Be descriptive and vivid."
3.  **Storage**: Save this description in a new column (e.g., `accessibility_desc`).

### 2. User Interface
-   **Alt Text**: Automatically inject this description into the `alt` attribute of the image tag.
-   **TTS (Text-to-Speech)**: Add a "Play Description" (Speaker icon) button in the Gallery/Modal.
    -   Clicking it reads out the vivid description using the Web Speech API or a cloud TTS service.
-   **Screen Reader Optimization**: Ensure this text is accessible to screen readers (ARIA labels).

