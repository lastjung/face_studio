# Landing Prompt

Next.js 16 App routing + TypeScript + Tailwind CSS v4ë¡œ AI ë°˜ì‘í˜• ì´ë¯¸ì§€ ìƒì„± ì„œë¹„ìŠ¤ "ë”¸ê¹ ìŠ¤íŠœë””ì˜¤"ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

## Header (ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”)
- ì™¼ìª½: ë¡œê³ 
- ê°€ìš´ë°: ì´ë¯¸ì§€ ìƒì„±, ë‚´ ê°¤ëŸ¬ë¦¬, ìš”ê¸ˆì œ, ì‚¬ìš©ë‚´ì—­ ë©”ë‰´
- ì˜¤ë¥¸ìª½: ì‹œì‘í•˜ê¸° ë²„íŠ¼

## Hero
- ì œëª©: "ë”¸ê¹ ìŠ¤íŠœë””ì˜¤" (ìš°ì¸¡ ìƒë‹¨ ìš°ì¸¡ìœ¼ë¡œ 30ë„ ê¸°ìš¸ì–´ì§„ "AI" ë°°ì§€ í¬í•¨)
- ë¶€ì œ: "ë‚´ ì–¼êµ´ì€ ê·¸ëŒ€ë¡œ, ì›í•˜ëŠ” ëª¨ìŠµìœ¼ë¡œ ë³€ì‹ !"

## í°ìƒ‰ í†¤ì˜ AI ì´ë¯¸ì§€ ìƒì„± ì¸í„°í˜ì´ìŠ¤
- ê°€ë¡œë¡œ ê¸´ í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½, ì…ë ¥ì°½ ë‚´ ìš°ì¸¡ í•˜ë‹¨ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ ì•„ì´ì½˜
- í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½ê³¼ ì¢Œìš° ë„ˆë¹„ê°€ ê°™ì€ ê²€ì •ìƒ‰ "ìƒì„±í•˜ê¸°" ë²„íŠ¼
- ëª¨ë¸ / ìŠ¤íƒ€ì¼ / ë¹„ìœ¨ ì„ íƒ ë²„íŠ¼ (ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì˜µì…˜ ì„ íƒ)

## SAMPLE GALLERY
- ì œëª©: "SAMPLE GALLERY"
- ë¶€ì œ: "í”„ë¦¬ë¯¸ì—„ AI ëª¨ë°ë§ ë§Œë“  ë†€ë¼ìš´ ë³€í™” (ë‹¤ìŒ ì¤„)
- í¬ê¸°ê°€ ì‘ì€ ì—¬ì„±/ë‚¨ì„±/ì•„ì´ ì •ì‚¬ê°í˜• ì´ë¯¸ì§€ ë°•ìŠ¤ 3ê°œê°€ ê°€ë¡œë¡œ ë‚˜ì—´
- ë°”ë¡œ ì•„ë˜ í° ì›ë³¸ ì´ë¯¸ì§€, ì´ë¯¸ì§€ ìœ„ìª½ì— ê²€ì •ìƒ‰ "ì›ë³¸ì‚¬ì§„" ë°°ì§€, ê¸°ë³¸ ì„¸íŒ…ì€ ì—¬ì„± ì´ë¯¸ì§€ì´ë©°, ë‚¨ì„±, ì•„ì´ í´ë¦­ ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ë¡œ ë³€ê²½
- ì›ë³¸ ì´ë¯¸ì§€ ì•„ë˜ 3x3 ì˜ˆì‹œ ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ, ì´ë¯¸ì§€ ìœ„ìª½ì— ê²€ì •ìƒ‰ "AI ìƒì„± ì´ë¯¸ì§€" ë°°ì§€, (ë§ˆì°¬ê°€ì§€ë¡œ ê¸°ë³¸ì€ ì—¬ì„±, ë‚¨ì„±, ì•„ì´ í´ë¦­ ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ë¡œ ë³€ê²½ )

# CTA
- "ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”"
- ë°”ë¡œ ì‹œì‘í•˜ê¸° â†’ ë²„íŠ¼

## Footer
- í‘¸í„° ì¢Œì¸¡: íšŒì‚¬ ê¸°ë³¸ ì •ë³´(ìƒí˜¸ëª…, ëŒ€í‘œ, ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, í†µì‹ íŒë§¤ì—…ì‹ ê³ , ì£¼ì†Œ, ì´ë©”ì¼ì„ í‘¸í„° ì¢Œì¸¡ì—,
- í‘¸í„° ìš°ì¸¡: ì´ìš© ì•½ê´€, ê°œì¸ì •ë³´ ì²˜ë¦¬ ë°©ì¹¨, Â© 2025 ìƒí˜¸ëª…. All rights reserved

## ê¸°ëŠ¥
- ì˜ˆì‹œ ì´ë¯¸ì§€ í´ë¦­ ì‹œ í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½ì— í…ìŠ¤íŠ¸ ìë™ ì…ë ¥,

## ë””ìì¸
- ì „ì²´ì ìœ¼ë¡œ ë°ì€ íšŒìƒ‰ ë°°ê²½
- ì—ë©”ë„ë“œìƒ‰ Primary ë²„íŠ¼

# Login Prompt

## ë¡œê·¸ì¸ ì°½ êµ¬í˜„ (íŒì—… ëª¨ë‹¬)
- ë³„ë„ì˜ ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™ì´ ì•„ë‹Œ, í˜„ì¬ í™”ë©´ ê°€ìš´ë° íŒì—…ë˜ëŠ” í˜•íƒœ
- **íŠ¸ë¦¬ê±°**: ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ë‹¤ìŒ ìš”ì†Œ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ì°½ íŒì—…
  - í”„ë¡¬í”„íŠ¸ ì…ë ¥ì°½, ìƒì„±í•˜ê¸° ë²„íŠ¼, ëª¨ë¸/ìŠ¤íƒ€ì¼/ë¹„ìœ¨ ë“œë¡­ë‹¤ìš´
  - ë‚´ ê°¤ëŸ¬ë¦¬ ë©”ë‰´, ìƒë‹¨ ì‹œì‘í•˜ê¸° ë²„íŠ¼, ì´ë¯¸ì§€ ì—…ë¡œë“œ ë²„íŠ¼
  - ìƒ˜í”Œ ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€, í•˜ë‹¨ ë°”ë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼

## ë¡œê·¸ì¸ ì°½ ë””ìì¸
- **ë ˆì´ì•„ì›ƒ**: í™”ë©´ ì •ì¤‘ì•™ ë°°ì¹˜ (Backdrop blur ì ìš©)
- **í—¤ë” í…ìŠ¤íŠ¸**:
  - ì œëª©: "ë¡œê·¸ì¸/íšŒì›ê°€ì…"
  - ì„¤ëª…: "ë”¸ê¹ ìŠ¤íŠœë””ì˜¤ì—ì„œ ë‚˜ë§Œì˜ íŠ¹ë³„í•œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”"
- **ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼**:
  - **êµ¬ê¸€**: íšŒìƒ‰ ë°°ê²½, êµ¬ê¸€ ë¡œê³  + "êµ¬ê¸€ë¡œ ê³„ì†í•˜ê¸°" í…ìŠ¤íŠ¸ (ê°€ìš´ë° ì •ë ¬)
  - **ì¹´ì¹´ì˜¤**: ë…¸ë€ìƒ‰(#FEE500) ë°°ê²½, ì¹´ì¹´ì˜¤ ë¡œê³  + "ì¹´ì¹´ì˜¤ë¡œ ê³„ì†í•˜ê¸°" í…ìŠ¤íŠ¸ (ê°€ìš´ë° ì •ë ¬)
  - ë¡œê³ ì™€ í…ìŠ¤íŠ¸ëŠ” ë²„íŠ¼ ì¤‘ì•™ì— í•¨ê»˜ ë°°ì¹˜ (ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ë¥¼ ê·¸ë£¹í™”í•˜ì—¬ ì¤‘ì•™ ì •ë ¬)
- **ê¸°íƒ€**: ìš°ì¸¡ ìƒë‹¨ ë‹«ê¸°(X) ë²„íŠ¼, í•˜ë‹¨ ì•½ê´€ ë™ì˜ ë¬¸êµ¬

## ìš”ê¸ˆì œ ë° í• ì¸ ê´€ë¦¬ ê¸°ëŠ¥

### 1. ìš”ê¸ˆì œ ê´€ë¦¬ í˜ì´ì§€
- Supabase `pricing_plans` í…Œì´ë¸”ê³¼ ì—°ë™í•˜ì—¬ ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ìš”ê¸ˆ ë° í¬ë ˆë”§ ì§ì ‘ ê´€ë¦¬
- **í• ì¸ ê¸°ëŠ¥ ì¶”ê°€**:
    - `pricing_plans` í…Œì´ë¸”ì— `discounted_price` (í• ì¸ê°€), `discount_percentage` (í• ì¸ìœ¨) ì»¬ëŸ¼ ì¶”ê°€
    - ê´€ë¦¬ìê°€ í• ì¸ê°€ë¥¼ ì…ë ¥í•˜ë©´ í• ì¸ìœ¨ ìë™ ê³„ì‚°ë˜ì–´ ì €ì¥

### 2. í• ì¸ ê¸°ëŠ¥ (ê´€ë¦¬ì)
- ìš”ê¸ˆì œ ì¶”ê°€/ìˆ˜ì • ì‹œ 'í• ì¸ê°€' ì…ë ¥ í•„ë“œ ì œê³µ
- í• ì¸ê°€ ì…ë ¥ ì‹œ í• ì¸ìœ¨(%) ìë™ ê³„ì‚° ë° í‘œì‹œ

### 3. í• ì¸ ê¸°ëŠ¥ (ì‚¬ìš©ì)
- `/pricing` í˜ì´ì§€ì— í• ì¸ ì ìš©ëœ ê°€ê²© ë…¸ì¶œ
- ì›ê°€(ì·¨ì†Œì„ )ì™€ í• ì¸ê°€, í• ì¸ìœ¨ ë°°ì§€ í‘œì‹œ

# Supabase Profile Table

## Database Schema (PostgreSQL)

### 1. Custom Types
- **Enum**: `public.app_role` ('Admin', 'User')
  - ëŒ€ì‹œë³´ë“œì—ì„œ ê¶Œí•œì„ ì§ê´€ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•¨

### 2. Profiles Table (`public.profiles`)
- **PK**: `id` (UUID, `auth.users` í…Œì´ë¸” ì°¸ì¡°, ON DELETE CASCADE)
- **Columns**:
  - `username` (text, 3ì ì´ìƒ)
  - `full_name` (text)
  - `avatar_url` (text)
  - `website` (text)
  - `role` (public.app_role, Default: 'User')
  - `updated_at` (timestamp with time zone)

### 3. Security (RLS)
- **Select**: ëª¨ë“  ì‚¬ìš©ì í—ˆìš© (`true`)
- **Insert/Update**: ë³¸ì¸(`auth.uid() = id`)ë§Œ ê°€ëŠ¥

### 4. Encryption & Automation
- **Trigger**: `public.handle_new_user` í•¨ìˆ˜
  - `auth.users`ì— INSERT ë°œìƒ ì‹œ(íšŒì›ê°€ì…), ìë™ìœ¼ë¡œ `profiles` í…Œì´ë¸”ì— í•´ë‹¹ ìœ ì € í–‰ ìƒì„±
  - ë©”íƒ€ë°ì´í„°(`full_name`, `avatar_url`) ìë™ ë³µì‚¬ ë° ê¸°ë³¸ ë¡¤ ì„¤ì •

# Supabase Integration Details

## 1. Stack & Libraries
- **Client**: `@supabase/supabase-js`
- **SSR/Server**: `@supabase/ssr` (Next.js 14 App Router í˜¸í™˜)
- **Role Management**: Custom `app_role` Enum (Admin/User)

## 2. Authentication Flow
1.  **Trigger**: User clicks "Login" button (Google/Kakao).
2.  **Client Action**: `supabase.auth.signInWithOAuth()` called with `redirectTo` param.
    - `redirectTo`: `${origin}/auth/callback?next=${currentPath}`
    - `next` íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ë¡œê·¸ì¸ ì‹œë„ ì „ í˜ì´ì§€ ìœ„ì¹˜ë¥¼ ê¸°ì–µ.
3.  **Provider**: Google/Kakao ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ ë° ì¸ì¦ ìˆ˜í–‰.
4.  **Callback**: `/app/auth/callback/route.ts`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (Code í¬í•¨).
5.  **Server Action**:
    - `exchangeCodeForSession(code)` ì‹¤í–‰í•˜ì—¬ ì¿ í‚¤ì— ì„¸ì…˜ ì €ì¥.
    - `next` íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ í•´ë‹¹ ê²½ë¡œë¡œ, ì—†ìœ¼ë©´ í™ˆ(`/`)ìœ¼ë¡œ ìµœì¢… ë¦¬ë‹¤ì´ë ‰íŠ¸.

## 3. Middleware (`middleware.ts`)
- ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ `updateSession` ì‹¤í–‰.
- ì¿ í‚¤ ì„¸ì…˜ ë§Œë£Œ ì‹œ í† í° ìë™ ê°±ì‹  (Silent Refresh).
- SSR í˜ì´ì§€ ë Œë”ë§ ì „ ìœ ì € ì¸ì¦ ìƒíƒœ í™•ì •.

# ğŸ“¸ ì²¨ë¶€ëœ ì´ë¯¸ì§€ ìš”êµ¬ì‚¬í•­ (Supabase)

## ì°¸ì¡° ë¬¸ì„œ
- **SSR Auth (Next.js)**:
  - https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app
- **Social Login (Google/Kakao)**:
  - https://supabase.com/docs/guides/auth/social-login/auth-google?queryGroups=platform&platform=web&queryGroups=environment&environment=client
  - https://supabase.com/docs/guides/auth/social-login/auth-kakao?queryGroups=environment&environment=client
- **User Data Management**:
  - https://supabase.com/docs/guides/auth/managing-user-data

## í•µì‹¬ ìš”êµ¬ì‚¬í•­
1.  **ë¦¬ë‹¤ì´ë ‰íŠ¸**: ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ë°˜ë“œì‹œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ ì‹œë„í•œ í˜ì´ì§€ë¡œ ëŒì•„ê°€ì•¼ í•¨.
2.  **Profiles í…Œì´ë¸”**:
    - ìœ„ ë¬¸ì„œ(managing-user-data) ì°¸ì¡°í•˜ì—¬ ìƒì„±.
    - `role` ì»¬ëŸ¼ì„ ë‘ê³  **Admin, User, Null** ì¤‘ ì„ íƒ ê°€ëŠ¥í•˜ë„ë¡ Enum ì„¤ì •.

# My Gallery Page Requirements (ë‚´ ê°¤ëŸ¬ë¦¬ í˜ì´ì§€)

## 1. í˜ì´ì§€ êµ¬ì¡° ë° ë„¤ë¹„ê²Œì´ì…˜
- **URL**: `/gallery`
- **ì ‘ê·¼**: í—¤ë”ë°”ì˜ "ë‚´ ê°¤ëŸ¬ë¦¬" ë²„íŠ¼ í´ë¦­ ì‹œ ì´ë™ (í—¤ë”ë°”ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€)

## 2. ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ í‘œì‹œ
- **í•­ëª©**: ì‚¬ìš©ìê°€ ìƒì„±í•œ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ê²©ì í˜•íƒœë¡œ í‘œì‹œ
- **ë°˜ì‘í˜•**:
  - **ëª¨ë°”ì¼**: 2ì¤„ (2 Columns)
  - **ì»´í“¨í„°**: 4ì¤„ (4 Columns)
- **ì¸í„°ë™ì…˜**:
  - **í˜¸ë²„**: ì´ë¯¸ì§€ ìœ„ì— ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ìš°ì¸¡ ìƒë‹¨ ë‹¤ìš´ë¡œë“œ/ì‚­ì œ ì•„ì´ì½˜ í‘œì‹œ
  - **ë¬´í•œ ìŠ¤í¬ë¡¤**:
    - ì´ˆê¸° ë¡œë“œ: ìµœëŒ€ 20ê°œ ì´ë¯¸ì§€ í‘œì‹œ
    - ìŠ¤í¬ë¡¤ ë‚´ë¦¬ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì´ë¯¸ì§€ë“¤ ë¶ˆëŸ¬ì˜¤ê¸°

## 3. ì´ë¯¸ì§€ ìƒì„¸ íŒì—… (ëª¨ë‹¬)
- **íŠ¸ë¦¬ê±°**: ì´ë¯¸ì§€ í´ë¦­ ì‹œ ë‘ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ ì§„ íŒì—… ë„ì›€
- **êµ¬ì„±**:
  - **ì™¼ìª½ ì˜ì—­**: ì´ë¯¸ì§€ ë°˜ì˜ (ë°˜ë“œì‹œ ì´ë¯¸ì§€ ì „ì²´ê°€ ë³´ì—¬ì•¼ í•¨)

## 4. ê°œë°œ í™˜ê²½ (Mock Data)
- **ì¡°ê±´**: ê°œë°œ í™˜ê²½ì—ì„œë§Œ ë³´ì´ëŠ” ëœë¤í•œ ìƒ˜í”Œ ì´ë¯¸ì§€ 60ê°œ ë°˜ì˜
- **ë°ì´í„° ì†ŒìŠ¤**: `https://picsum.photos/`ì—ì„œ ëœë¤í•œ ì´ë¯¸ì§€ ê°€ì ¸ì˜´
- **ì„¤ì •**: `picsum.photos` ë„ë©”ì¸ì„ `next.config.ts`ì— ì¶”ê°€

# Image Storage & Persistence Logic

## 1. Process Overview
1.  **Imagen API í˜¸ì¶œ**: ì´ë¯¸ì§€ ìƒì„± (Base64 ìˆ˜ì‹ )
2.  **Supabase Storage ì—…ë¡œë“œ**:
    -   `generated_images` ë²„í‚·ì— ì´ë¯¸ì§€ íŒŒì¼ ì €ì¥
    -   Content-Type: `image/png`
    -   Path: `{user_id}/{timestamp}_{uuid}.png`
3.  **Database ì €ì¥ (`public.images`)**:
    -   `storage_url`: Storageì˜ Public URL
    -   `prompt`: ìƒì„± í”„ë¡¬í”„íŠ¸
    -   `model`: ì‚¬ìš© ëª¨ë¸
    -   `user_id`: ìƒì„±í•œ ìœ ì € ID
4.  **Client ì‘ë‹µ**: ìƒì„±ëœ ì´ë¯¸ì§€ì˜ Signed URL ë˜ëŠ” Public URL ë°˜í™˜

## 2. Database Schema (`public.images`)
-   `id`: UUID (PK)
-   `user_id`: UUID (FK to auth.users)
-   `storage_path`: Text (ìŠ¤í† ë¦¬ì§€ ê²½ë¡œ)
-   `prompt`: Text
-   `model`: Text
-   `created_at`: Timestamptz (Default: now())
-   `face_description`: Text (Gemini Vision Analysis)
-   `final_prompt`: Text (Actual Prompt sent to GenAI)

# Feature Proposal: Low Vision Accessibility (ì €ì‹œë ¥ì ì ‘ê·¼ì„±)

## Goal
Improve the experience for users with low vision by providing detailed, descriptive alt text for generated images, going beyond simple prompts.

## Implementation Strategy: "AI Audio Description"
Use **Gemini Vision** to re-analyze the *generated output image* specifically for accessibility purposes.

### 1. Workflow
1.  **Generation**: User generates an image.
2.  **Post-Processing**: The system sends the generated image to Gemini Vision with a specialized prompt.
    -   *Prompt Example*: "Describe this image for a visually impaired user. Focus on detailed visual elements like lighting, facial expressions, colors, composition, and mood. Be descriptive and vivid."
3.  **Storage**: Save this description in a new column (e.g., `accessibility_desc`).

### 2. User Interface
-   **Alt Text**: Automatically inject this description into the `alt` attribute of the image tag.
-   **TTS (Text-to-Speech)**: Add a "Play Description" (Speaker icon) button in the Gallery/Modal.
    -   Clicking it reads out the vivid description using the Web Speech API or a cloud TTS service.
-   **Screen Reader Optimization**: Ensure this text is accessible to screen readers (ARIA labels).

# Credit System Requirements (í¬ë ˆë”§ ì‹œìŠ¤í…œ)

í¬ë ˆë”§ ì‹œìŠ¤í…œì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì™„ì „íˆ êµ¬í˜„í•´ì¤˜.

## ìš”êµ¬ì‚¬í•­

### í¬ë ˆë”§ ì •ì±…
- ì´ë¯¸ì§€ ìƒì„± ì‹œ ëª¨ë¸ë³„ í¬ë ˆë”§ ì°¨ê°: í„°ë³´(1), ê¸°ë³¸(2), ê³ í’ˆì§ˆ(3)
- í”Œë˜ì‹œ ëª¨ë¸ì€ ì„ íƒ ì˜µì…˜ì—ì„œ ì œê±°
- í¬ë ˆë”§ êµ¬ë§¤ ì‹œ ì¶”ê°€
- ë¨¼ì € êµ¬ë§¤í•œ í¬ë ˆë”§ë¶€í„° ë¨¼ì € ì†Œì§„ (FIFO)

### ìš”ê¸ˆì œ
- Starter: 10 í¬ë ˆë”§, â‚©3,900
- Basic: 30 í¬ë ˆë”§, â‚©9,800
- Pro: 60 í¬ë ˆë”§, â‚©18,800

### UI
- í—¤ë”ë°” í”„ë¡œí•„ ë²„íŠ¼ ì™¼ìª½ì— í˜„ì¬ í¬ë ˆë”§ í‘œì‹œ
- ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ í¬ë ˆë”§ì„ ì†Œì§„í•˜ëŠ” ê²½ìš° ì”ì—¬ í¬ë ˆë”§ í™”ë©´ì— ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- /pricing í˜ì´ì§€ ìƒì„± (ìš”ê¸ˆì œ 3ê°œ ì¹´ë“œë¡œ í‘œì‹œ, êµ¬ë§¤ ë²„íŠ¼)
- í—¤ë”ë°”ì˜ "ìš”ê¸ˆì œ (/pricing)", "ì‚¬ìš© ë‚´ì—­ (/credits/history)" í˜ì´ì§€ ìƒì„±
- í—¤ë”ë°”ì˜ "ìš”ê¸ˆì œ" "ì‚¬ìš© ë‚´ì—­" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ë™ (í—¤ë”ë°”ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€)
- í¬ë ˆë”§ ë¶€ì¡± ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- í™˜ë¶ˆ ìš”ì²­ ë²„íŠ¼ ë° ëª¨ë‹¬

### í¬ë ˆë”§ ì†Œì§„ ë°©ì‹ (FIFO)
- ì´ë¯¸ì§€ ìƒì„± ì‹œ ìë™ í¬ë ˆë”§ ì°¨ê°
- í¬ë ˆë”§ êµ¬ë§¤ (ì§€ê¸ˆì€ í…ŒìŠ¤íŠ¸ìš©, ë‚˜ì¤‘ì— í† ìŠ¤í˜ì´ë¨¼ì¸  ì—°ë™ ì˜ˆì •)
- First-in-First-Out ë°©ì‹ ì ìš©
- /pricing í˜ì´ì§€ëŠ” pricing_plans í…Œì´ë¸”ì—ì„œ ìš”ê¸ˆì œ ì •ë³´ ì¡°íšŒ
- í¬ë ˆë”§ ì‚¬ìš© ë‚´ì—­ í˜ì´ì§€ (/credits/history)
- ê° êµ¬ë§¤ê±´ë³„ë¡œ ì‚¬ìš© ì—¬ë¶€ í‘œì‹œ

### í™˜ë¶ˆ ì •ì±… (ì¤‘ìš”!)
1. í™˜ë¶ˆ ìš”ì²­ ì¡°ê±´: ê° êµ¬ë§¤ê±´ ë³„ë¡œ êµ¬ë§¤í•œ í¬ë ˆë”§ì„ í•˜ë‚˜ë„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°ì—ë§Œ ê°€ëŠ¥
2. í¬ë ˆë”§ êµ¬ë§¤ í›„ 7ì¼ ì´ë‚´ì—ë§Œ í™˜ë¶ˆ ìš”ì²­ ê°€ëŠ¥
3. í¬ë ˆë”§ì„ 1ê°œë¼ë„ ì‚¬ìš©í•œ êµ¬ë§¤ê±´ì€ í™˜ë¶ˆ ìš”ì²­ ë¶ˆê°€ (UIì—ì„œ ë²„íŠ¼ ë¹„í™œì„±í™”)
4. ì‚¬ìš©ìê°€ í™˜ë¶ˆ ìš”ì²­ ì‹œ í•´ë‹¹ êµ¬ë§¤ê±´ì˜ ìƒíƒœê°€ 'pending_refund'ë¡œ ë³€ê²½
5. í™˜ë¶ˆ ëŒ€ê¸° ì¤‘ì¸ êµ¬ë§¤ê±´ì˜ í¬ë ˆë”§ì€ ì‚¬ìš© ë¶ˆê°€ (í™˜ë¶ˆ ëŒ€ê¸° ì¤‘ì¸ êµ¬ë§¤ê±´ì€ ê±´ë„ˆë›°ê³  ë‹¤ìŒ í¬ë ˆë”§ ì‚¬ìš©)
6. ê´€ë¦¬ìê°€ í™˜ë¶ˆ ìŠ¹ì¸ ì‹œ:
   - í•´ë‹¹ êµ¬ë§¤ê±´ì˜ ì „ì²´ í¬ë ˆë”§ë§Œí¼ profiles.creditsì—ì„œ ì°¨ê°
   - êµ¬ë§¤ê±´ ìƒíƒœë¥¼ 'refunded'ë¡œ ë³€ê²½
7. ê´€ë¦¬ìê°€ í™˜ë¶ˆ ê±°ë¶€ ì‹œ:
   - êµ¬ë§¤ê±´ ìƒíƒœë¥¼ ë‹¤ì‹œ 'active'ë¡œ ë³€ê²½
   - í¬ë ˆë”§ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥

## í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ (Auth, profiles, generated_images)
- profiles í…Œì´ë¸”: auth ì°¸ì¡°
- generated_images í…Œì´ë¸”: user_id -> profiles.id ì°¸ì¡°
- ì¤‘ìš”: ëª¨ë“  ì‚¬ìš©ì ê´€ë ¨ í…Œì´ë¸”ì€ profiles.idë¥¼ ì°¸ì¡°í•´ì•¼ í•¨ (auth.users.id ì§ì ‘ ì°¸ì¡° X)

### êµ¬í˜„ì´ í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤
- profiles í…Œì´ë¸”ì— credits ì»¬ëŸ¼ ì¶”ê°€
- í¬ë ˆë”§ ê´€ë ¨ í…Œì´ë¸” 6ê°œ ìƒì„±:

1. pricing_plans - ìš”ê¸ˆì œ ì •ë³´ (ê³µí†µ í…Œì´ë¸”, user_id ì—†ìŒ)
   - name: ìš”ê¸ˆì œëª…
   - credits: í¬ë ˆë”§ ê°œìˆ˜
   - price: ê°€ê²©
   - is_active: íŒë§¤ ì¤‘ ì—¬ë¶€
   - sort_order: ì •ë ¬ ìˆœì„œ

2. credit_sources - êµ¬ë§¤ê±´ë³„ ì”ì•¡ ì¶”ì  (FIFOìš©)
   - user_id -> profiles.id ì°¸ì¡°
   - status: active, pending_refund, refunded
   - initial_credits: êµ¬ë§¤ ì‹œ í¬ë ˆë”§
   - remaining_credits: ë‚¨ì€ í¬ë ˆë”§
   - plan_id -> pricing_plans.id ì°¸ì¡°

3. credit_consumption - ì†Œë¹„ ìƒì„¸ ê¸°ë¡
   - user_id -> profiles.id ì°¸ì¡°

4. credit_transactions - ëª¨ë“  ì¦ê° ë¡œê·¸
   - user_id -> profiles.id ì°¸ì¡°

5. payment_history - ê²°ì œ ë‚´ì—­
   - user_id -> profiles.id ì°¸ì¡°

6. refund_requests - í™˜ë¶ˆ ìš”ì²­
   - user_id -> profiles.id ì°¸ì¡°
   - status: pending, approved, rejected

- ëª¨ë“  ì‚¬ìš©ì ê´€ë ¨ í…Œì´ë¸”ì˜ user_idëŠ” profiles.idë¥¼ ì°¸ì¡°

### ì´ˆê¸° ë°ì´í„°
- pricing_plans í…Œì´ë¸”ì— 3ê°œ ìš”ê¸ˆì œ ì¶”ê°€

ëª¨ë“  API, í˜ì´ì§€, ì»´í¬ë„ŒíŠ¸, ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤˜
í•œê¸€ ì£¼ì„ê³¼ í•¨ê»˜ ê° ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ì¤˜.
FIFO ë¡œì§ê³¼ í™˜ë¶ˆ ì²˜ë¦¬ ë¡œì§ì€ íŠ¹íˆ ìƒì„¸í•˜ê²Œ êµ¬í˜„í•´ì¤˜.


# Toss Payments ê²°ì œ ì—°ë™ ìš”êµ¬ì‚¬í•­ (ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ë³€í™˜)

ê²°ì œí˜ì´ì§€ë¥¼ ë§Œë“¤ê³ , ê²°ì œí˜ì´ì§€ì— í† ìŠ¤í˜ì´ë¨¼ì¸  ê²°ì œìœ„ì ¯ì„ ë Œë”ë§í•´ì¤˜

ë‹¤ìŒ ê²°ì œ ìœ„ì ¯ ì—°ë™ ê°€ì´ë“œ, SDK ë¬¸ì„œë¥¼ ì² ì €íˆ ì½ê³  Next.js + React + Typescript í”„ë¡œì íŠ¸ì— ë§ê²Œ êµ¬í˜„í•´ì¤˜.

@https://docs.tosspayments.com/guides/v2/payment-widget/integration (ê²°ì œìœ„ì ¯ ì—°ë™ ê°€ì´ë“œ)
@https://docs.tosspayments.com/sdk/v2/js (SDK ë¬¸ì„œ ì¤‘ ê²°ì œìœ„ì ¯ ê´€ë ¨ ë¶€ë¶„ ì°¸ì¡°)

1. ìš”ê¸ˆì œ í˜ì´ì§€(/pricing)ì—ì„œ ìš”ê¸ˆì œë¥¼ ì„ íƒí•˜ë©´ ê²°ì œí˜ì´ì§€ë¡œ ì´ë™
2. ì£¼ë¬¸ì •ë³´ ì°½: ê²°ì œì°½ ìš°ì¸¡ì— ë°°ì¹˜(PC) ê²°ì œì°½ ìœ„ì— ë°°ì¹˜(ëª¨ë°”ì¼)
3. ê²°ì œ UIëŠ” ë°˜ë“œì‹œ ì£¼ë¬¸ì„œì˜ DOMì´ ìƒì„±ëœ ì´í›„ì— í˜¸ì¶œí•´ì•¼í•¨
4. ê²°ì œë¥¼ ì™„ë£Œí•˜ë©´ ì‚¬ìš©ì í¬ë ˆë”§ì— ê²°ì œë¶„ ë°˜ì˜
5. ë¡œê·¸ì¸ í•˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ êµ¬ë§¤í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë¡œê·¸ì¸í˜ì´ì§€ë¡œ ì—°ë™ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë¡œê·¸ì¸ ì°½ì„ ë„ì›€ -> ë¡œê·¸ì¸ì„ ë§ˆì¹˜ë©´ ê²°ì œí˜ì´ì§€ë¡œ ì´ë™
6. í™˜ê²½ë³€ìˆ˜ë¥¼ ê¸°ì¡´ì— ìˆëŠ” .env.localíŒŒì¼ ë§¨ ì•„ë˜ì— ë°˜ë“œì‹œ ì§ì ‘ ë°˜ì˜í•´ì¤˜

# Toss Payments Configuration Note
NEXT_PUBLIC_TOSS_CLIENT_KEY=test_gck_docs_Ovk5rk1EwkEbP0W43n07xlzm
TOSS_SECRET_KEY=test_gsk_docs_OaPz8L5KdmQXkzRz3y47BMw6

ì°¸ê³ ë¡œ í”„ë¡¬í”„íŠ¸ ë§¨ ì•„ë˜ ë°˜ì˜ëœ ë‘ ê°€ì§€ í‚¤ëŠ” ê²°ì œìœ„ì ¯ ì—°ë™ ê°€ì´ë“œ ë‚˜ì™€ìˆëŠ” í…ŒìŠ¤íŠ¸ í‚¤ë¡œ ê²°ì œë¥¼ ì§„í–‰í•´ë„ ì‹¤ì œë¡œëŠ” ë¹„ìš©ì´ ì „í˜€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¶”í›„ í† ìŠ¤í˜ì´ë¨¼ì¸  ê³„ì•½ ì™„ë£Œ ì´í›„ ë¼ì´ë¸Œí‚¤ë¡œ ë³€ê²½í•˜ë©´ ì‹¤ì œ ê²°ì œê°€ ì§„í–‰ë©ë‹ˆë‹¤.

# [ê´€ë¦¬ì í˜ì´ì§€ ìš”ì²­ ì‚¬í•­]

1. ê´€ë¦¬ì í˜ì´ì§€(/admin) êµ¬í˜„

ê´€ë¦¬ìí˜ì´ì§€(/admin) ë§Œë“¤ì–´ì¤˜

ë¨¼ì € ê´€ë¦¬ì ë¡œê·¸ì¸ í˜ì´ì§€(/admin/login)ì—ì„œ ë¡œê·¸ì¸ì„ ë§ˆì¹˜ë©´ -> ê´€ë¦¬ìí˜ì´ì§€(/admin)ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” í”Œë¡œìš°

(ì¤‘ìš”) ê´€ë¦¬ì ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œëŠ” ì‚¬ì´ë“œë°” ì—†ì´ ë¡œê·¸ì¸ í˜ì´ì§€ë§Œ í‘œì‹œ

##êµ¬ì„±

ê´€ë¦¬ì í˜ì´ì§€ êµ¬ì„± ë©”ë‰´(ì´ 5ê°œ): ëŒ€ì‹œë³´ë“œ, íšŒì› ê´€ë¦¬, ê²°ì œ ê´€ë¦¬, í™˜ë¶ˆ ê´€ë¦¬, ìš”ê¸ˆì œ ê´€ë¦¬

ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ ë©”ë‰´ í´ë¦­í•´ ê° ë©”ë‰´ ì ‘ì†, ê¸°ì¡´ì‚¬ì´íŠ¸ì˜ í—¤ë” ë° í‘¸í„°ëŠ” ê´€ë¦¬ìí˜ì´ì§€ì—ì„œëŠ” í‘œì‹œí•˜ì§€ ì•ŠìŒ

##ëŒ€ì‹œ ë³´ë“œ

ëŒ€ì‹œë³´ë“œì— í‘œì‹œí•  ë°ì´í„°ëŠ” DBì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹Œ, ìµœëŒ€í•œ ë‹¤ë¥¸ ë©”ë‰´ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì§‘ê³„í•˜ëŠ” í˜•íƒœë¡œ ì œê³µ

## ìš”ê¸ˆì œ ê´€ë¦¬ í˜ì´ì§€

Supabase pricing_plans í…Œì´ë¸”ê³¼ ì—°ë™í•´ ê´€ë¦¬ìí˜ì´ì§€ì—ì„œ ìš”ê¸ˆ ë° í¬ë ˆë”§ ì§ì ‘ ê°€ëŠ¥í•˜ë„ë¡ ì ìš©

ë‚´ê°€ ì§ì ‘ ì–¸ê¸‰í•œ ë¶€ë¶„ ì™¸ ë‚˜ë¨¸ì§€ ìš”ì†ŒëŠ” ìµœëŒ€í•œ ì‹¬í”Œí•˜ê³  ê¼­ í•„ìš”í•œ ê¸°ëŠ¥ ìœ„ì£¼ë¡œ êµ¬í˜„í•´ì¤˜

í˜„ì¬ Database ì² ì €íˆ ì‚´í´ë³´ê³  í•œë²ˆì— ì—°ë™ ì˜ ë˜ê²Œ êµ¬í˜„í•´ì¤˜.

# [2] ìš”ê¸ˆì œ ë° í• ì¸ ê´€ë¦¬ ê¸°ëŠ¥ì„ prompt.md íŒŒì¼ì— ë¶™ì´ê³  ê°œë°œí•´ì¤˜

## ìš”ê¸ˆì œ ê´€ë¦¬ í˜ì´ì§€

Supabase pricing_plans í…Œì´ë¸”ê³¼ ì—°ë™í•´ ê´€ë¦¬ìí˜ì´ì§€ì—ì„œ ìš”ê¸ˆ ë° í¬ë ˆë”§ ì§ì ‘ ê´€ë¦¬ ê°€ëŠ¥í•˜ë„ë¡ ì ìš©

ê´€ë¦¬ì í˜ì´ì§€ > ìš”ê¸ˆì œ ê´€ë¦¬ í˜ì´ì§€ì— í”Œëœë³„ë¡œ í• ì¸ì„ ì ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í• ê±°ì•¼

Supabase Pricing_plans í…Œì´ë¸”ì— discounted_priceì™€ discounted_percentage ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì¤˜. (ì´ë¯¸ì§€ì˜ 'í…Œì´ë¸”' ì˜¤íƒ€ë¥¼ ë¬¸ë§¥ì— ë§ê²Œ 'ì»¬ëŸ¼'ìœ¼ë¡œ ìˆ˜ì •í•˜ì—¬ ì ìš©)

## í• ì¸ ê¸°ëŠ¥ (ê´€ë¦¬ì)

ìš”ê¸ˆì œ ê´€ë¦¬ í˜ì´ì§€ì—ì„œ ì§ì ‘ í• ì¸ê°€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê²Œ í•´ì¤˜

í• ì¸ê°€ë¥¼ ì§€ì •í•˜ë©´ ìë™ìœ¼ë¡œ í• ì¸ë¥ ì´ ê³„ì‚°ë˜ì–´ ì ìš©ë˜ê²Œ í•´ì¤˜

## í• ì¸ ê¸°ëŠ¥ (ì‚¬ìš©ì)

ì ìš©ëœ í• ì¸ê°€ì™€ í• ì¸ë¥ ì´ ìš”ê¸ˆì œ í˜ì´ì§€(/pricing)ì—ë„ ì ì ˆí•˜ê²Œ ë…¸ì¶œë˜ì–´ ì‚¬ìš©ìê°€ ë³¼ ìˆ˜ ìˆê²Œ í•´ì¤˜

## ê¸°íƒ€ ìš”ì²­

ë‚´ê°€ ì§ì ‘ ì–¸ê¸‰í•œ ë¶€ë¶„ ì™¸ ë‚˜ë¨¸ì§€ ìš”ì†ŒëŠ” ìµœëŒ€í•œ ì‹¬í”Œí•˜ê³  ê¼­ í•„ìš”í•œ ê¸°ëŠ¥ ìœ„ì£¼ë¡œ êµ¬í˜„í•´ì¤˜


# [3] íšŒì› íƒˆí‡´ Soft Delete êµ¬í˜„

íšŒì› íƒˆí‡´ì‹œ Soft Deleteë°©ì‹ì„ ì ìš©í• ê±°ì•¼.

ë‹¤ìŒì€ Supabaseì˜ Soft Deleteì— ëŒ€í•œ ê³µì‹ë¬¸ì„œ ë§í¬ì•¼. ì°¸ì¡°í•´ì„œ êµ¬í˜„í•´ì¤˜
https://supabase.com/docs/guides/troubleshooting/soft-deletes-with-supabase-js

ë¬¸ì„œì— ë‚˜ì™€ìˆë“¯ì´ Profilesí…Œì´ë¸”ì— deleted_at ì»¬ëŸ¼ì„ ì¶”ê°€í•´ì„œ ê´€ë¦¬í•´ì¤˜.
deleted_at ì»¬ëŸ¼ì— ë°ì´í„°ê°€ nullì¸ ê²½ìš°ì—ë§Œ í”„ë¡œí•„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•´ì¤˜


# [4] ì‚¬ìš©ì í™œë™ ë¡œê·¸ ì‹œìŠ¤í…œ êµ¬í˜„

í†µì‹ ë¹„ë°€ë³´í˜¸ë²• ì¤€ìˆ˜ë¥¼ ìœ„í•´ ë¡œê·¸ í…Œì´ë¸”ì„ ë§Œë“¤ê³ 
1. ë¡œê·¸ì¸ 2. ë¡œê·¸ì•„ì›ƒ 3. í˜ì´ì§€ë°©ë¬¸ ê¸°ë¡ì„ ì €ì¥í• ê±°ì•¼

- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ: ê¸°ì¡´ ë¡œê·¸ì¸ ì²˜ë¦¬ ë¶€ë¶„ì— ë¡œê·¸ ì½”ë“œ ì¶”ê°€
- í˜ì´ì§€ë°©ë¬¸ ê¸°ë¡: í˜ì´ì§€ê°€ ë°”ë€” ë•Œ ë¸Œë¼ìš°ì €ì—ì„œ ê°ì§€í•´ ì„œë²„ì— ê¸°ë¡

- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ê¸°ë¡ë§Œ ì €ì¥
- ì €ì¥ëœ ëª¨ë“  ë¡œê·¸ ê¸°ë¡ì´ 3ê°œì›” í›„ ìë™ì‚­ì œë˜ëŠ” ë¡œì§ êµ¬í˜„í•´ ì¤˜
(Supabase pg_cron ì´ìš©)

Supabase í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ì‚´í´ë³´ê³  ë‚˜ì„œ êµ¬í˜„ ì‹œì‘í•´

ì—¬ê¸°ì„œ pg_cronì€ PostgreSQL ë‚´ì—ì„œ ì •í•´ì§„ ì‹œê°„ë§ˆë‹¤ íŠ¹ì • SQL ëª…ë ¹ì„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì˜ˆì•½ ì‘ì—…(ìŠ¤ì¼€ì¤„ëŸ¬) í™•ì¥ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¦‰, ë§¤ì¼ ìì •ì— ë¡œê·¸ í…Œì´ë¸”ì„ ì¡°íšŒí•´ ìƒì„±ì¼ë¡œë¶€í„° 90ì¼ì´ ì§€ë‚œ ë¡œê·¸ë¥¼ ìë™ìœ¼ë¡œ ì‚­ì œí•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# [5] ë°ì´í„° ì•”í˜¸í™” (Application-Level Encryption)

ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ìœ„í•´ ì£¼ìš” ë¯¼ê° ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— í‰ë¬¸ìœ¼ë¡œ ì €ì¥í•˜ì§€ ì•Šê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥í• ê±°ì•¼.

## ì•”í˜¸í™” ëŒ€ìƒ

1.  **Profiles í…Œì´ë¸”**:
    *   `full_name`: ì‚¬ìš©ì ì‹¤ëª…
    *   `email`: ì‚¬ìš©ì ì´ë©”ì¼ (ìƒˆë¡œ ì¶”ê°€)
2.  **Activity Logs í…Œì´ë¸”**:
    *   `ip_address`: ì ‘ì† IP ì£¼ì†Œ

## êµ¬í˜„ ë°©ì‹

1.  **ì•Œê³ ë¦¬ì¦˜**: `AES-256-GCM` (ê°•ë ¥í•œ ë³´ì•ˆ ë° ë¬´ê²°ì„± ë³´ì¥)
2.  **í‚¤ ê´€ë¦¬**:
    *   í™˜ê²½ ë³€ìˆ˜ `ENCRYPTION_KEY`ì— 32ë°”ì´íŠ¸ Hex ë¬¸ìì—´ë¡œ ê´€ë¦¬
    *   DB ë‚´ë¶€ê°€ ì•„ë‹Œ Next.js **ì„œë²„ ì‚¬ì´ë“œ(backend)**ì—ì„œ ì•”/ë³µí˜¸í™” ìˆ˜í–‰
3.  **í”„ë¡œí•„ ìƒì„± ë¡œì§ ë³€ê²½**:
    *   ê¸°ì¡´ DB Trigger(`handle_new_user`) ì œê±°
    *   ë¡œê·¸ì¸ ì‹œ(`ensureUserProfile`) ì„œë²„ ì•¡ì…˜ì—ì„œ ì•”í˜¸í™” í›„ DB Insert/Update ìˆ˜í–‰

## ê´€ë¦¬ì ê¸°ëŠ¥ (Admin View)

*   ê´€ë¦¬ì í˜ì´ì§€(`/admin/*`)ì—ì„œëŠ” í•´ë‹¹ ì•”í˜¸í™”ëœ ì»¬ëŸ¼ë“¤ì„ **ìë™ìœ¼ë¡œ ë³µí˜¸í™”**í•˜ì—¬ ë³´ì—¬ì¤˜ì•¼ í•¨ (ì‹¤ëª…/ì´ë©”ì¼ í™•ì¸ ê°€ëŠ¥í•˜ë„ë¡)
*   ì¼ë°˜ ì‚¬ìš©ìëŠ” ë³¸ì¸ ì •ë³´ ì™¸ íƒ€ì¸ì˜ ì •ë³´ë¥¼ ë³µí˜¸í™”í•  ìˆ˜ ì—†ì–´ì•¼ í•¨

## ë§ˆì´ê·¸ë ˆì´ì…˜

*   ê¸°ì¡´ì— ê°€ì…ëœ í‰ë¬¸ ë°ì´í„°ê°€ ìˆë‹¤ë©´, ì´ë¥¼ ì¼ê´„ ì•”í˜¸í™”í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸(`scripts/encrypt_all_profiles.ts`)ë¥¼ í†µí•´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜í–‰

# [6] Framing (Shot Type) Keywords
Used in `Guide: Combo Box 1` (Framing Selector)

## 1. ì–¼êµ´ ìœ„ì£¼ (Face Close-up)
- **Positive**: `Close-up face shot, face filling the frame, highly detailed eyes and skin texture, intimate portrait`
- **Negative (Auto-added)**: `full body, wide shot, far away, standing, legs, shoes, torso, waist, neck only, bust shot, shoulders visible`

## 2. ê°€ìŠ´ ìœ„ (Bust)
- **Positive**: `Medium close-up, Bust shot, Head and Chest visible, chest and shoulders fully visible, passport photo composition`
- **Negative (Auto-added)**: `full body, legs, shoes, waist, hips, extreme close-up, macro, chin only, face only, text, watermark, close up face only`

## 3. ìƒë°˜ì‹  (Waist Up)
- **Positive**: `Mid-shot, Waist Up portrait, belt line visible, hands visible, clean background, high quality photo`
- **Negative (Auto-added)**: `full body, legs, shoes, knees, hips, extreme close-up, head shot, face shot, character sheet, stats, text, writing, ui, interface, infobox, typography, letters`

## 4. ë¬´ë¦ ìœ„ (Knee Up)
- **Positive**: `American shot, Cowboy shot, View from knees up, thighs visible, knees visible, standing natural pose, 3/4 length portrait`
- **Negative (Auto-added)**: `full body, shoes, feet, extreme close-up, head shot, face shot, bust shot, waist up only, close up`

## 5. ì „ì‹  (Full Body)
- **Positive**: `Wide shot, Full body photograph, entire figure visible from head to toe, subject small in frame, lots of headroom and footroom, shoes visible`
- **Negative (Auto-added)**: `close up, face shot, bust shot, cropped, zoomed in, head only, portrait, extreme close-up, waist up, knee up, illustration, anime, 3d render, painting, cropped legs, cropped feet`

# [7] Style Keywords & Credit Logic
Used in `Guide: Combo Box 2` (Style Selector + Cost Display)

## 1. ì‚¬ì‹¤ì  (Realistic)
- **Prompt**: `8k resolution, raw photo, dslr, 85mm lens, depth of field, bokeh, soft lighting, neutral lighting, white balance, high detail, film grain, Fujifilm XT3, photorealistic`

## 2. ì¼ëŸ¬ìŠ¤íŠ¸ (Illustration)
- **Prompt**: `digital illustration, concept art, trending on artstation, very detailed, smooth, vibrant colors, clean lines, fantasy art style`

## 3. ì• ë‹ˆë©”ì´ì…˜ (Animation)
- **Prompt**: `anime style, japanese animation, makoto shinkai style, studio ghibli, vibrant, 2d, cel shading, detailed backgrounds`

## 4. ìˆ˜ì±„í™” (Watercolor)
- **Prompt**: `watercolor painting, wet on wet, soft blending, artistic, dreamy, pastel colors, paper texture, traditional media`

## 5. ìœ í™” (Oil Painting)
- **Prompt**: `oil painting, thick brush strokes, canvas texture, impressionism, fine art, traditional art, rich colors`

## Cost Logic (ë¹„ìš©)
- **Base Cost**: 2 Credits per image.
- **Formula**: `2 * Image Count` (e.g., 4 images = 8 credits).



